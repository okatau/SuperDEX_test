# Инструкция по вызову send через MultiPath
### 1. Задеплоить ERC20 токен с параметрами TOKEN, TKN и 100000000000000000000000000000000000000. [Контракт токена](./contracts/Token.sol)
  ### 2. Задеплоить [UniswapV2Factory](./Uniswap-v2-core/UniswapV2Factory.sol)
  ### 3. Создать пару из нашего токена из пункта 1 и [USDT](https://testnet.bscscan.com/token/0x7ef95a0fee0dd31b22626fa2e10ee6a223f8a684)
  ### 4. Вызвать approve у TOKEN и USDT на адрес получившейся пары и размером 100000000000000000000000000000000000000
  ### 5. Вызвать transfer У TOKEN и USDT указав адрес пары и число 5000000000000000000000000000000000
  ### 6. Вызвать mint у контракта пары указав ваш адрес
  ### 7. Задеплоить контракт [FeeClaimer](../Utils/FeeClaimer.sol) указав в параметрах конструктора адрес AugustusSwapper
  ### 8. Задеплоить контракт [Adapter01](../adapters/Adapter01.sol)(я указывал параметры нулевые адреса, т.к. я не пользовался контрактами, в которых они используются)
  ### 9. Задеплоить [MultiPath](./MultiPath.sol) с параметрами:
    + _partnerSharePercent - 8500
    + _maxFeePercent - 500
    + _feeClaimer - адрес FeeClaimer из 7-ого пункта
___
## Инициализация сети отправителя(FROM) 
у MultiPath'a вызвать метод setContractAddressOnChainId с параметрами:
 + _address - адрес контракта в сети получателя
 + _chainId - номер сети, в которую делается вызов
___
## Инициализация сети получателя(TO)
у MultiPath'a вызвать метод addControllingAddress с параметрами:
+ _address - адрес контракта в сети отправителя
+ _chainId - номер сети, из которой будет сделан вызов
___
## Параметры для вызова метода multiSwap
~~~
[["Адрес токена, с которого начинается обмен, в сети отправителя",
"Адрес токена, с которого начинается обмен, в сети получателя"], 
"Количество токенов, которые мы отдаем для обмена", 
"количество токенов, которые мы получим", 
"количество токенов, которые мы ожидаем получить", 
"адрес получателя", 
[[
    "адрес токена, который мы получим после обмена в сети отправителя", 
	0, 
	[[
        "адрес адаптера из пункта 8. (можно использовтьт этот для BSC 0x63eEAdEA8BB764FD5cF26a4E7f11Ea4fFdBCc44C)", 
		10000, 
		0, 
		[[
            4, 
			"0x0000000000000000000000000000000000000000", 
			10000, 
			"Опишу ниже(payload)", 
			0
    	]]
	]]
]], 
[[
    "адрес токена, который мы получим после обмена в сети получателя", 
	0, 
	[[
        "адрес адаптера из пункта 8(можно использовть этот для kovan 0xf4B1C241aeD30381BF6f08d9f553cBBee2B81DE7", 
		10000, 
		0, 
		[[
            4, 
			"0x0000000000000000000000000000000000000000", 
			10000, 
			"См. ниже(payload)", 
			0
		]]
	]]
]], 
"partner адрес", 
"452312848583266388373324160190187140051835877600158453279131187530910679040", 
"0x00", 
1686061732, 
"0x48726217fca940b892b3b899843c8a57", 
"50000000000000000",(executionFee) 
"ChainId"
]
~~~
## Параметры для вызова megaSwapDeBridge
~~~
[["Адрес токена, с которого начинается обмен, в сети отправителя", 
"Адрес токена, с которого начинается обмен, в сети получателя"], 
"Количество токенов, которые мы отдаем для обмена", 
"количество токенов, которые мы получим", 
"количество токенов, которые мы ожидаем получить", 
"адрес получателя", 
  [[
    "Какой процент суммы мы хотим обменять. Может быть несколько подобных структур данных(Пример 10000)", 
    [[
      "токен, который мы получим после обмена",
      "0",
      [[
        "адрес адаптера из пункта 8. (можно использовтьт этот для BSC 0x63eEAdEA8BB764FD5cF26a4E7f11Ea4fFdBCc44C)",
        "10000",
        "0",
        [[
          "4",
          "0x0000000000000000000000000000000000000000",
          "10000",
          "См. ниже",
          "0"
        ]]
      ]]
    ]]
  ]],
  [[
    "Какой процент суммы мы хотим обменять. Может быть несколько подобных структур данных(Пример 10000)", 
    [[
      "токен, который мы получим после обмена",
      "0",
      [[
        "адрес адаптера из пункта 8(можно использовть этот для kovan 0xf4B1C241aeD30381BF6f08d9f553cBBee2B81DE7)",
        "10000",
        "0",
        [[
          "4",
          "0x0000000000000000000000000000000000000000",
          "10000",
          "См. ниже",
          "0"
        ]]
      ]]
    ]]
  ]],
  "partner адрес",
  "452312848583266388373324160190187140051835877600158453279131187530910679040",
  "permit",
  "deadline",
  "uuid",
  "executionFee",
  "chainId"
]
~~~
## Как получить payload:
Необходимо перейти по [ссылке](https://testnet.bscscan.com/address/0xf78bFB108200B6514EEB907b5E6c6c61d63DBe73#readContract) и заполнить поля:
+ feePercent - 9970
+ pair - адрес пары, в которой будет происходить обмен
+ direction -  true если токен который мы отправляем это token0 в паре, иначе false

Полученное число надо закодировать с помощью:
  ~~~ javascript
  web3.eth.abi.encodeParameter(
        {
            "UniswapV2Data": {
                "weth": 'address',
                "pools": 'uint256[]'
            }
        },
        {
            "weth": 'адрес weth',
            "pools": ['числовое значение, которое мы получили выше, если обмен состоит из нескольких токенов, то указать другие числовые значения как массив'],
        }
);
~~~
Полученное значение можно указать в параметре payload в вызове метода multiSwap
